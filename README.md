# 离线 RSA 文本加密/解密 静态页面

在线演示: https://rsatotext.pages.dev

本项目是一个纯前端静态网页，实现：
- 用户手动输入随机熵（≥50字符）生成 2048 位 RSA 密钥对
- 使用 OAEP (SHA-256) 对任意 UTF-8 文本进行分块加密与解密
- PEM (PKCS#1) 格式导出公钥/私钥并支持下载
- 完全离线运行，无任何网络请求

## 使用步骤
1. 打开 `index.html`（建议使用现代浏览器：Chrome / Edge / Firefox 最新版）
2. 在“输入随机熵”区域疯狂敲击键盘，输入至少 50 个混合字符（建议包含大小写、数字、符号）
3. 点击“生成 RSA 密钥”，等待进度信息显示（素数搜索较耗时）
4. 生成后公钥与私钥显示，可点击“下载 PEM 文件”保存
5. 在“明文加密”输入框粘贴或输入要加密的大文本，点击“加密”得到分块 Base64 密文（以点号 `.` 拼接）
6. 将密文粘贴到“密文解密”区域，点击“解密”即可恢复原文

## 分块逻辑
- 模长：2048 位 (256 字节)
- OAEP + SHA-256 产生的可容纳消息长度：`k - 2*hashLen - 2 - 1` 约 189 字节/块
- 大文本会被自动切分为若干块依次加密，密文以 Base64 块使用 `.` 拼接

## 安全注意
- 本实现主要用于学习与演示，不包含：侧信道防护、真正的密码学安全审计、浏览器环境的高质量随机源绑定（仅依赖用户输入熵 + 简单 DRBG）。
- 不建议用于生产极高敏感级别数据。实际应用建议：
  - 使用 WebCrypto API 或专业库（如 SubtleCrypto）
  - 使用混合加密：随机生成对称密钥 (AES-GCM)，用 RSA 加密该对称密钥，再用 AES 加密正文，效率更高
  - 私钥请务必妥善保管，丢失无法解密；泄露会导致任何已加密内容被恢复

## 局限与改进方向
- 纯 JS 实现 Miller-Rabin 与大整数运算性能有限，可考虑 WebAssembly 优化
- DRBG 仅基于 SHA-256 计数器构造，未使用系统安全随机数（为保持离线与可控性）。可在浏览器中结合 `crypto.getRandomValues` 增强
- 没有实现密钥的加密存储（例如使用密码对私钥二次加密）
- 没有实现 PEM 的 PKCS#8 或 SubjectPublicKeyInfo 封装，仅最小 PKCS#1

## 文件结构
- `index.html` 主页面结构和 UI
- `style.css` 深色主题样式、响应式布局
- `script.js` 核心逻辑（哈希、DRBG、素数生成、RSA、OAEP、分块编/解码、UI 交互）
- `README.md` 项目说明

## 离线运行
直接双击或拖入浏览器即可，无需任何构建与依赖。可放入 U 盘便携使用。

## 免责声明
本项目不提供任何安全保证，请根据风险场景自行评估。使用者需自行承担使用本代码造成的任何后果。
